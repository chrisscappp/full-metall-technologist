import{r as a,j as e,c as p,H as _,B as b,T as n,L as y,V as u}from"./index-Dc0lYbGn.js";import{i as f,I as g,N as E}from"./PersonalComputingPage-0hF2OQSp.js";import{C as P}from"./Input-Cx1eHjTj.js";import{o as S}from"./index-C0KQb3kg.js";const w="_Table_1jm4d_1",k="_th_1jm4d_10",C="_td_1jm4d_22",j={Table:w,th:k,td:C},T=a.memo(l=>{const{className:o,items:s}=l;return e.jsxs("table",{className:p(j.Table,{},[o]),border:1,children:[e.jsx("thead",{children:e.jsx("tr",{children:s==null?void 0:s.titles.map(t=>e.jsx("th",{className:j.th,children:t},`table-title-${t}`))})}),e.jsx("tbody",{children:(s==null?void 0:s.rows)&&s.rows.map((t,r)=>e.jsx("tr",{children:t.map(i=>e.jsx("td",{className:j.td,children:i},`table-row-item${i}`))},`table-row-${r}`))})]})}),I="_table_1u92m_1",L={table:I},R=l=>{const{className:o,onSetParsedValues:s}=l,[t,r]=a.useState(""),[i,c]=a.useState(!1),[d,x]=a.useState(""),N=a.useCallback(async z=>{z.stopPropagation();try{x(""),r("");const h=await S({multiple:!1,directory:!1,filters:[{name:"Model",extensions:["m3d"]}]});c(!0);const m=await f(g.RUN_PARSE_MODEL_VARIABLES_SCRIPT,{params:{file_path:h}});m.status!==200?x(m.message):(r(m.message),s==null||s(m))}catch(h){x(JSON.stringify(h))}finally{c(!1)}},[s]);return a.useEffect(()=>{t&&setTimeout(()=>{r("")},3e3)},[t]),e.jsxs(_,{className:p("",{},[o]),gap:"16",align:"center",children:[e.jsx(b,{onClick:N,theme:"backgroundInverted",children:"Загрузить модель"}),e.jsx(n,{text:"Поддерживаемые форматы: .m3d, .cdw, .spw",size:"size_s",theme:"tertiary"}),t&&e.jsx(n,{text:t,theme:"secondary",size:"size_s"}),d&&e.jsx(n,{text:d,theme:"error",size:"size_s"}),i&&e.jsx(y,{size:"loader_s"})]})},V=l=>{const{className:o,onSetParsedValues:s,description:t,title:r,variablesToParse:i}=l,c=a.useCallback(async d=>{d.stopPropagation(),await f(g.OPEN_PARSE_MODEL_VARIABLES_GUIDE)},[]);return e.jsxs(P,{className:p("",{},[o]),children:[e.jsx(u,{gap:"20",children:e.jsxs(u,{gap:"16",children:[e.jsx(E,{number:"1",children:e.jsx(n,{title:r??"Работа с моделью",size:"size_s"})}),e.jsx(n,{text:t,size:"size_s",theme:"secondary"})]})}),e.jsxs(u,{className:L.table,gap:"16",max:!0,children:[e.jsx(_,{gap:"8",max:!0,align:"start",children:e.jsx(T,{items:{titles:["Обозначение","Название переменной"],rows:i}})}),e.jsx(R,{onSetParsedValues:s}),e.jsxs(_,{gap:"16",max:!0,align:"center",children:[e.jsx(b,{onClick:c,theme:"tertiary",children:"Открыть инструкцию"}),e.jsx(n,{text:"Подробное руководство по назначению переменных в КОМПАС 3D",theme:"tertiary",size:"size_s"})]})]})]})},O=a.memo(V);export{O as default};
